<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/606746 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="694"/>
<h1>docker容器技术与应用  第3周  笔记</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2023/2/27 10:42</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2023/2/27 10:43</i></td></tr>
<tr><td><b>作者：</b></td><td><i>程露</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><span style="font-size: 16pt; color: rgb(255, 0, 0); font-weight: bold;">一、docker常规操作：</span></div><div><span style="font-size: 21.3333px; color: rgb(255, 0, 0); font-weight: bold;">前提条件：docker正在运行！</span></div><div><span style="font-size: 16pt;">systemctl    status   docker 检查docker是否正在运行</span></div><div><span style="font-size: 16pt; color: rgb(166, 0, 196);">1）docker  help  查看docker命令帮助文档</span></div><div><span style="font-size: 16pt; color: rgb(227, 0, 0);">*具体要查看某一个操作的具体帮助信息，可以如下操作，例如：docker  run  --help</span></div><div><br/></div><div><span style="font-size: 16pt; color: rgb(166, 0, 196);">2）docker  pull   拉取镜像</span></div><div><span style="font-size: 14pt;">[root@docker1 /]# docker pull httpd</span></div><div><span style="font-size: 14pt;">Using default tag: latest</span></div><div><span style="font-size: 14pt;">latest: Pulling from library/httpd:2.4</span></div><div><span style="font-size: 14pt;">a2abf6c4d29d: Pull complete</span></div><div><span style="font-size: 14pt;">dcc4698797c8: Pull complete</span></div><div><span style="font-size: 14pt;">41c22baa66ec: Pull complete</span></div><div><span style="font-size: 14pt;">67283bbdd4a0: Pull complete</span></div><div><span style="font-size: 14pt;">d982c879c57e: Pull complete</span></div><div><span style="font-size: 14pt;">Digest: sha256:0954cc1af252d824860b2c5dc0a10720af2b7a3d3435581ca788dff8480c7b32</span></div><div><span style="font-size: 14pt;">Status: Downloaded newer image for httpd:latest</span></div><div><span style="font-size: 12pt;">docker.io/library/httpd:2.4</span></div><div><br/></div><div><span style="font-size: 16pt; color: rgb(166, 0, 196);">3）docker  image  ls  / docker  images  查看镜像列表</span></div><div><span style="font-size: 14pt;">[root@docker1 /]# docker images</span></div><div><span style="font-size: 14pt;">REPOSITORY         TAG                 IMAGE ID            CREATED             SIZE</span></div><div><span style="font-size: 14pt;">mysql               latest              3218b38490ce        3 months ago        516MB</span></div><div><span style="font-size: 14pt;">ubuntu              latest              ba6acccedd29        5 months ago        72.8MB</span></div><div><span style="font-size: 14pt;">hello-world         latest              feb5d9fea6a5        6 months ago        13.3kB</span></div><div><span style="font-size: 14pt;">centos              latest              5d0da3dc9764        6 months ago        231MB</span></div><div><span style="font-size: 14pt; color: rgb(227, 0, 0);">*REPOSITORY：仓库+镜像名</span></div><div><span style="font-size: 14pt; color: rgb(227, 0, 0);">*TAG：版本号</span></div><div><span style="font-size: 14pt; color: rgb(227, 0, 0);">*IMAGE ID：镜像ID</span></div><div><span style="font-size: 14pt; color: rgb(227, 0, 0);">*CREATED：镜像发布时间</span></div><div><span style="font-size: 14pt; color: rgb(227, 0, 0);">*SIZE：镜像大小</span></div><div><br/></div><div><span style="font-size: 16pt; color: rgb(166, 0, 196);">4）docker  inspect  $image_ID  查看镜像详细信息</span></div><div><span style="font-size: 14pt; color: rgb(227, 0, 0);">*image_ID 其实就是取了sha256码的前12位字符</span></div><div><span style="font-size: 14pt; color: rgb(227, 0, 0);">*sha256码有且仅有一个，不会有相同的，image_ID取前12位足以区分不同的镜像，所以才具备唯一性</span></div><div><br/></div><div><span style="font-size: 16pt; color: rgb(166, 0, 196);">5）docker  rmi   删除镜像</span></div><div><span style="font-size: 14pt;">[root@docker1 /]# docker rmi hello-world</span></div><div><span style="font-size: 14pt;">Untagged: hello-world:latest</span></div><div><span style="font-size: 14pt;">Untagged: hello-world@sha256:2498fce14358aa50ead0cc6c19990fc6ff866ce72aeb5546e1d59caac3d0d60f</span></div><div><span style="font-size: 14pt;">Deleted: sha256:feb5d9fea6a5e9606aa995e879d862b825965ba48de054caab5ef356dc6b3412</span></div><div><span style="font-size: 14pt;">Deleted: sha256:e07ee1baac5fae6a26f30cabfe54a36d3402f96afda318fe0a96cec4ca393359</span></div><div><span style="font-size: 14pt; color: rgb(227, 0, 0);">*删除镜像的前提条件：这个镜像没有被容器占用，如果被占用了，必须先停止容器，然后把容器彻底删除，才能继续删除该镜像。</span></div><div><span style="font-size: 14pt; color: rgb(227, 0, 0);">docker  stop  $container_ID   -&gt;  docker  rm   $container_ID  -&gt;   docker  rmi  $image_ID </span></div><div><span style="font-size: 14pt; color: rgb(227, 0, 0);">*当一个镜像被某个容器占用时，如果被执行强制删除的（docker rmi  -f）操作，则镜像名会被删除，取而代之的名字为“none”，但对应的镜像文件不会被删除，只有当容器删除之后，才能删除名为none的镜像。</span></div><div><br/></div><div><span style="font-size: 16pt; color: rgb(166, 0, 196);">6）docker ps  查看容器进程列表</span></div><div><span style="background-color: rgb(255, 250, 165); font-size: 14pt;-evernote-highlight:true;">6.1：</span></div><div><span style="font-size: 14pt;">[root@docker1 /]# docker ps</span> <span style="font-size: 14pt; font-weight: bold;">-a</span><span style="font-size: 14pt;">   </span><span style="font-size: 14pt; color: rgb(77, 206, 29);">//</span><span style="font-size: 16pt; color: rgb(77, 206, 29);">查看所有容器进程</span></div><div><span style="font-size: 14pt;">CONTAINER ID        IMAGE               COMMAND              CREATED             STATUS              PORTS               NAMES</span></div><div><span style="font-size: 14pt;">132d66dfff66        dabbfbe0c57b        &quot;httpd-foreground&quot;   5 minutes ago       Up 5 minutes        80/tcp         </span><span style="font-size: 14pt;">pensive_brown</span></div><div><span style="font-size: 14pt; color: rgb(227, 0, 0);">*container ID：容器ID号</span></div><div><span style="font-size: 14pt; color: rgb(227, 0, 0);">*IMAGE：使用的镜像</span></div><div><span style="font-size: 14pt; color: rgb(227, 0, 0);">*COMMAND：容器运行的第一个程序</span></div><div><span style="font-size: 18.6667px; color: rgb(227, 0, 0);">容器分成两种：1、服务型容器（一直在后台运行） 2、工具型容器（完成一个瞬时任务之后即自动停止）</span></div><div><span style="font-size: 14pt; color: rgb(227, 0, 0);">*CREATED：容器生成的时间</span></div><div><span style="font-size: 14pt; color: rgb(227, 0, 0);">*STATUS：容器状态（up：正在运行，exit(0)：正常退出，exit(127/137)：异常退出）</span></div><div><span style="font-size: 14pt; color: rgb(227, 0, 0);">*PORTS：容器开放的服务端口</span></div><div><span style="font-size: 14pt; color: rgb(227, 0, 0);">*NAMES：容器名称，默认情况下，没有指定容器名称的话，系统会自动分配一个没有任何特殊意义的容器名</span></div><div><span style="background-color: rgb(255, 250, 165); font-size: 14pt;-evernote-highlight:true;">6.2:</span></div><div><span style="font-size: 14pt;">[root@docker1 /]# docker ps</span> <span style="font-size: 14pt; font-weight: bold;">-l</span><span style="font-size: 14pt;">   </span><span style="font-size: 14pt; color: rgb(77, 206, 29);">//</span><span style="font-size: 16pt; color: rgb(77, 206, 29);">查看最后一次启动的容器进程</span></div><div><span style="font-size: 14pt;">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span></div><div><span style="font-size: 14pt;">9516f3b1f455        centos              &quot;/bin/bash&quot;         53 seconds ago      Up 52 seconds                           quirky_noyce</span></div><div><span style="background-color: rgb(255, 250, 165); font-size: 14pt; font-family: unset;-evernote-highlight:true;">6.3: </span><span style="font-size: 16pt; color: rgb(166, 0, 196); font-family: unset;"> </span></div><div><span style="font-size: 14pt;">[root@docker1 /]# docker ps</span> <span style="font-size: 14pt; font-weight: bold;">-aq </span> <span style="font-size: 14pt; color: rgb(77, 206, 29);">//</span><span style="font-size: 16pt; color: rgb(77, 206, 29);">查看所有容器的进程ID</span></div><div><span style="font-size: 14pt;">9516f3b1f455</span></div><div><span style="font-size: 14pt;">45d7f65c7577</span></div><div><span style="font-size: 14pt;">8846ca7b6850</span></div><div><span style="font-size: 14pt;">5e9db3c073c3</span></div><div><span style="background-color: rgb(255, 250, 165); font-size: 14pt; font-family: unset;-evernote-highlight:true;">6.4: </span></div><div><span style="font-size: 14pt;">[root@docker1 ~]# docker ps</span> <span style="font-size: 14pt; font-weight: bold;">-s</span><span style="font-size: 14pt;"> </span> <span style="font-size: 14pt; color: rgb(77, 206, 29);">//</span><span style="font-size: 16pt; color: rgb(77, 206, 29); font-family: unset;">查看容器的大小</span></div><div><span style="font-size: 14pt;">CONTAINER ID        IMAGE               COMMAND              CREATED             STATUS              PORTS               NAMES               SIZE</span></div><div><span style="font-size: 14pt;">132d66dfff66        httpd               &quot;httpd-foreground&quot;   10 seconds ago      Up 9 seconds        80/tcp              pensive_brown       2B (virtual 144MB)</span></div><div><span style="font-size: 14pt; color: rgb(227, 0, 0);">*2B：代表容器可写层大小</span></div><div><span style="font-size: 14pt; color: rgb(227, 0, 0);">*（virtual 144MB）：代表容器镜像只读层加上可写层的大小</span></div><div><span style="background-color: rgb(255, 250, 165); font-size: 14pt; font-family: unset;-evernote-highlight:true;">6.5: </span></div><div><span style="font-size: 14pt;">[root@docker1 /]# docker ps -a</span> <span style="font-size: 14pt; font-weight: bold;">--no-trunc</span><span style="font-size: 14pt;">  </span><span style="font-size: 14pt; color: rgb(77, 206, 29);">//不截断输出，显示容器的完整ID号</span></div><div><span style="font-size: 14pt;">CONTAINER ID                                                       IMAGE               COMMAND              CREATED             STATUS                      PORTS                   NAMES</span></div><div><span style="font-size: 14pt;">420be53d2a7fb3689db18e4cef7ed4cbc3f6f9c2f078017dcdd9edfbaa2b4d87   httpd               &quot;httpd-foreground&quot;   2 minutes ago       Up 2 minutes                80/tcp                  nostalgic_buck</span></div><div><span style="background-color: rgb(255, 250, 165); font-size: 14pt; font-family: unset;-evernote-highlight:true;">6.6: </span></div><div><span style="font-size: 14pt;">[root@docker1 /]# docker ps</span> <span style="font-size: 14pt; font-weight: bold;">-n 2 </span><span style="font-size: 14pt;"> </span><span style="font-size: 14pt; color: rgb(77, 206, 29);">//显示最后创建的两个容器</span></div><div><span style="font-size: 14pt;">CONTAINER ID        IMAGE               COMMAND              CREATED             STATUS              PORTS                   NAMES</span></div><div><span style="font-size: 14pt;">420be53d2a7f        httpd               &quot;httpd-foreground&quot;   5 minutes ago       Up 5 minutes        80/tcp                  nostalgic_buck</span></div><div><span style="font-size: 14pt;">438b2857748d        httpd               &quot;httpd-foreground&quot;   10 minutes ago      Up 10 minutes       0.0.0.0:32768-&gt;80/tcp   httpd-1</span></div><div><span style="background-color: rgb(255, 250, 165); font-size: 14pt; font-family: unset;-evernote-highlight:true;">6.7：</span></div><div><span style="font-size: 14pt;">[root@docker1 /]# docker ps</span> <span style="font-size: 14pt; font-weight: bold;">--filter status=exited</span><span style="font-size: 14pt;">  </span><span style="font-size: 14pt; color: rgb(77, 206, 29);">//按照“status=exited”过滤满足条件的容器</span></div><div><span style="font-size: 14pt;">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                         PORTS               NAMES</span></div><div><span style="font-size: 14pt;">45d7f65c7577        centos              &quot;/bin/bash&quot;         About an hour ago   Exited (0) About an hour ago                       heuristic_chandrasekhar</span></div><div><span style="font-size: 14pt;">8846ca7b6850        centos              &quot;/bin/bash&quot;         About an hour ago   Exited (0) About an hour ago                       unruffled_jepsen</span><span style="font-size: 14pt; font-family: unset;"> </span></div><div><span style="font-size: 14pt; color: rgb(227, 0, 0); font-family: unset;">*可以按照容器名称过滤，也可以按照容器的运行状态（created、restarting、running、removing、paused、exited、dead）过滤，也可以按照容器的ID号进行过滤</span></div></span>
</div></body></html> 